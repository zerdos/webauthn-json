import{b as h,c as n,d as u,e as m,f as C,g as t,h as y,i as l,j as b,k as x,l as S,m as g,o as O,p as f}from"./chunk-ZWBBCUH2.js";import{a as W}from"./chunk-T36Q4X3B.js";var w={appid:t(n),appidExclude:t(n),uvm:t(n),credProps:t(n),largeBlob:t({support:t(n),read:t(n),write:t(u)})},B={appid:t(n),appidExclude:t(n),uvm:t(n),credProps:t(n),largeBlob:t({supported:t(n),blob:t(u),written:t(n)})},v=JSON.parse(JSON.stringify(y));v.publicKey.schema.extensions=t(w);var J=JSON.parse(JSON.stringify(l));J.clientExtensionResults=C(B,l.clientExtensionResults.derive);J.response.schema.transports=l.response.schema.transports;var E=JSON.parse(JSON.stringify(b));E.publicKey.schema.extensions=t(w);var N=JSON.parse(JSON.stringify(x));N.clientExtensionResults=C(B,x.clientExtensionResults.derive);var L=navigator.credentials?.create.bind(navigator.credentials),R=navigator.credentials?.get.bind(navigator.credentials);navigator.credentials||(navigator.credentials={});var d=class extends HTMLElement{constructor(){super();this.shadow=this.attachShadow({mode:"closed"});let s=document.createElement("style");s.textContent=W,this.shadow.appendChild(s),this.contentWrapper=document.createElement("div"),this.contentWrapper.classList.add("wrapper"),this.shadow.appendChild(this.contentWrapper),this.header=document.createElement("div"),this.header.textContent="WebAuthn Request",this.header.classList.add("header"),this.contentWrapper.appendChild(this.header),this.controls=document.createElement("div"),this.controls.classList.add("controls"),this.contentWrapper.appendChild(this.controls),this.textareaWrapper=document.createElement("div"),this.textareaWrapper.classList.add("textarea-wrapper"),this.contentWrapper.appendChild(this.textareaWrapper),this.textarea=document.createElement("textarea"),this.textareaWrapper.appendChild(this.textarea),this.closeButton=document.createElement("button"),this.closeButton.textContent="Close",this.closeButton.addEventListener("click",()=>{document.body.removeChild(this),this.close&&this.close()}),this.controls.appendChild(this.closeButton);let e=document.createElement("button");e.textContent="Copy JSON",e.addEventListener("click",()=>{navigator.clipboard.writeText(this.textarea.value),e.textContent="Copied!",setTimeout(()=>{e.textContent="Copy JSON"},1e3)}),this.controls.appendChild(e),document.body.appendChild(this)}async create(s){return new Promise((e,a)=>{this.close=()=>{a("WebAuthn inspector closed")};let p=m(h,v,s);this.header.textContent="WebAuthn Create Request",this.textarea.value=JSON.stringify(p,null,"  "),this.opButton=document.createElement("button"),this.opButton.textContent="Create",this.opButton.addEventListener("click",async()=>{try{let o=JSON.parse(this.textarea.value),c=S(o),r=await L(c);this.success("Create",g(r)),this.closeButton.textContent="Respond",this.close=()=>{e(r)}}catch(o){this.failure("Create",o),this.close=()=>{a(o)}}}),this.controls.appendChild(this.opButton)})}async get(s){return new Promise((e,a)=>{this.close=()=>{a("WebAuthn inspector closed")};let p=m(h,E,s);this.header.textContent="WebAuthn Get Request",this.textarea.value=JSON.stringify(p,null,"  "),this.opButton=document.createElement("button"),this.opButton.textContent="Get",this.opButton.addEventListener("click",async()=>{try{let o=JSON.parse(this.textarea.value),c=O(o);console.log(c);let r=await R(c);this.success("Get",f(r)),this.closeButton.textContent="Respond",this.close=()=>{e(r)}}catch(o){this.failure("Get",o),this.close=()=>{a(o)}}}),this.controls.appendChild(this.opButton)})}success(s,e){this.controls.removeChild(this.opButton),this.header.textContent=`\u2705 WebAuthn ${s} Response`,this.contentWrapper.classList.add("success"),this.textarea.value=JSON.stringify(e,null,"  ")}failure(s,e){this.controls.removeChild(this.opButton),this.header.textContent=`\u274C WebAuthn ${s} Response`,this.contentWrapper.classList.add("failure"),this.textarea.value=e.toString()}};customElements.define("webauthn-inspector",d);navigator.credentials.create=async function(i){return console.log(i),await new d().create(i)};navigator.credentials.get=async function(i){return await new d().get(i)};console.log("WebAuthn Inspector is active!");export{d as a};
//# sourceMappingURL=chunk-BKHRU5YR.js.map
